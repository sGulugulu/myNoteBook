
```dataviewjs
// å®Œæ•´çš„å‘¨è®°æ˜¾ç¤ºåŠŸèƒ½ - ä¿®å¤ç‰ˆ
async function getDiaryByDate(dateString) {
    try {
        // å‡è®¾æ—¥è®°æ–‡ä»¶åœ¨ "æ—¥è®°" æ–‡ä»¶å¤¹ä¸­ï¼Œæ ¼å¼ä¸º "YYYY-MM-DD.md"
        const filePath = `æ—¥è®°/${dateString}.md`;
        const file = app.vault.getFileByPath(filePath);
        
        if (file) {
            // è¯»å–æ–‡ä»¶å…¨éƒ¨å†…å®¹ - ä½¿ç”¨ await
            const content = await app.vault.read(file);
            return content;
        } else {
            return `**${dateString} å½“å¤©æ²¡æœ‰æ—¥è®°**`;
        }
    } catch (error) {
        console.error("è¯»å–æ—¥è®°æ—¶å‡ºé”™:", error);
        return `**è¯»å–æ—¥è®°æ—¶å‡ºé”™: ${error.message}**`;
    }
}

// å¼‚æ­¥ç‰ˆæœ¬çš„å‘¨è®°è·å–å‡½æ•°
async function getWeeklyDiaries() {
    const today = new Date();
    const currentDay = today.getDay(); // 0=å‘¨æ—¥, 1=å‘¨ä¸€...
    const monday = new Date(today);
    monday.setDate(today.getDate() - currentDay + (currentDay === 0 ? -6 : 1));
    
    const weeklyDiaries = [];
    
    for (let i = 0; i < 7; i++) {
        const date = new Date(monday);
        date.setDate(monday.getDate() + i);
        const dateString = date.toISOString().split('T')[0];
        
        // ä½¿ç”¨ await è°ƒç”¨å¼‚æ­¥å‡½æ•°
        const diary = await getDiaryByDate(dateString);
        weeklyDiaries.push({
            date: dateString,
            content: diary
        });
    }
    return weeklyDiaries;
}

// ä¸»æ‰§è¡Œå‡½æ•°
async function main() {
    try {
        // è°ƒç”¨è¿™ä¸ªå‡½æ•° - ä½¿ç”¨ await
        const diaries = await getWeeklyDiaries();
        
        // å°†ç»“æœä»¥è¡¨æ ¼å½¢å¼å±•ç¤º
        dv.table(["æ—¥æœŸ", "å†…å®¹"], diaries.map(d => [d.date, d.content]));
        
    } catch (error) {
        dv.paragraph(`**é”™è¯¯: ${error.message}**`);
    }
}

// æ‰§è¡Œä¸»å‡½æ•°
main();
```

```dataviewjs
// å®ç”¨çš„å‘¨è®°æ˜¾ç¤ºåŠŸèƒ½
async function displayWeeklyDiaries() {
    const today = new Date();
    const currentDay = today.getDay();
    const monday = new Date(today);
    monday.setDate(today.getDate() - currentDay + (currentDay === 0 ? -6 : 1));
    
    // è·å–æ—¥è®°å†…å®¹çš„å¼‚æ­¥å‡½æ•°
    async function getDiaryContent(dateString) {
        try {
            const filePath = `æ—¥è®°/${dateString}.md`;
            const file = app.vault.getFileByPath(filePath);
            return file ? await app.vault.read(file) : null;
        } catch (error) {
            return null;
        }
    }
    
    let output = `# ğŸ“… æœ¬å‘¨æ—¥è®°æ±‡æ€»\n\n`;
    output += `**å‘¨æœŸ**: ${monday.toISOString().split('T')[0]} è‡³ ${new Date(monday.getTime() + 6 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}\n\n`;
    
    let diaryCount = 0;
    
    // æŒ‰å¤©æ˜¾ç¤ºæ—¥è®°
    for (let i = 0; i < 7; i++) {
        const date = new Date(monday);
        date.setDate(monday.getDate() + i);
        const dateString = date.toISOString().split('T')[0];
        const weekday = ["å‘¨æ—¥", "å‘¨ä¸€", "å‘¨äºŒ", "å‘¨ä¸‰", "å‘¨å››", "å‘¨äº”", "å‘¨å…­"][date.getDay()];
        
        output += `## ${dateString} ${weekday}\n`;
        
        const diaryContent = await getDiaryContent(dateString);
        
        if (diaryContent) {
            diaryCount++;
            output += `${diaryContent}\n\n`;
        } else {
            output += `> *ğŸ“ ä»Šå¤©è¿˜æ²¡æœ‰å†™æ—¥è®°*\n\n`;
        }
        
        output += `---\n\n`;
    }
    
    // æ·»åŠ ç»Ÿè®¡ä¿¡æ¯
    output += `## ğŸ“Š æœ¬å‘¨ç»Ÿè®¡\n`;
    output += `- æ—¥è®°å®Œæˆåº¦: **${Math.round((diaryCount / 7) * 100)}%** (${diaryCount}/7 å¤©)\n`;
    output += `- æ›´æ–°æ—¥æœŸ: ${new Date().toLocaleString()}\n`;
    
    return output;
}

// æ‰§è¡Œå¹¶æ˜¾ç¤ºç»“æœ
const result = await displayWeeklyDiaries();
dv.paragraph(result);
```